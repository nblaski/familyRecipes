<%- include('../partials/header') -%>
<%- include('../partials/navbar') -%>






<!-- TREEHOUSE RECIPE BOX -->

<%- include('../partials/messages') -%>
<div class="jumbotron" style="background: none !important; padding: 10px 30px; margin-bottom: 0px;">
	<div class="row">
			<div style="text-align: left; margin: 5px; padding: 0px; display: inline-block">
				<a class="btn btn-secondary" href="/recipes">Back</a>
			
			<div style="text-align: left; margin: 5px; padding: 0px;display: inline-block">
				<% if (recipe.author === user.name || user.role == "admin") { %>
					<a class="btn btn-warning" href="/recipes/<%= recipe.id %>/edit">Edit</a>
					<% } else { %>
					<% } %>		
			</div>
			<div style="margin: 5px; padding: 0px;display: inline-block">
				<%- include('../partials/deleteForm', { url: `/recipes/${recipe._id}` }) -%>
			</div>
		</div>
	</div>
</div>


<div class="jumbotron" style="background: none !important; padding-top: 20px;">
    <div class="jumbotron" style="padding: 15px; border-style: solid; border-color: rgb(157, 157, 157); border-radius: .5em; border-width: 3px;">
		

		<div class="row" style="margin-top: 10px;">

            <div class="col" style="text-align: center;">
				<div class="row" style="margin-bottom: 10px;">
					<h2 style="text-align: center"><%= recipe.recipeName %></h2>
					<h5 style="text-align:center; margin-bottom: 15px">Author: <%= recipe.author %></h5>
					<img style="width: 100%; height: 100%; min-width: 225px; max-height: 900px; object-fit: cover; display: inline-block;" src="<%=recipe.imageName%>">
				</div>
				
				
            </div>


            <div class="col">

				<h3 style="margin-bottom: 15px; margin-top: 10px;">Recipe:</h3>
						
						<h6><b>Ingredients</b></h6>
						<hr style="margin-top: 0px; height:1px;border:none;color:#333;background-color:#333;" >
						<ul style="padding: 0px">
							<% for (var i = 0; i < recipe.ingredients.length; i++) { %>
								<% if (recipe.ingredients[i] !== "") {%> 
									<li id="ingredient_<%=i%>" style="list-style: none"><%= recipe.ingredients[i] %> - <%= recipe.amount[i] %></li>
									<% } else { %> 
										<%  %> 
									<% } %> 
							<% } %>
						</ul>
						<h6 class="showStepsHeader"><b>Steps</b></h6>
						<hr style="margin-top: 0px; height:1px;border:none;color:#333;background-color:#333;" >
						<div class="showSteps">
							<ol>
								<% for (var i = 0; i < recipe.stepName.length; i++) { %>
									<% if (recipe.stepNameTitle[i] !== "") { %> 
										<li id="stepNameTitle_<%=i%>" class="liStep"><b><%= recipe.stepNameTitle[i] %></b></li>
										<li id="stepName_<%=i%>"  style="padding: 0px 0px 0px 30px"><%= recipe.stepName[i] %></li><br>
									<% } else { %>
									<% } %>
								<% } %>
							</ol>	
						</div>

						<hr style="color:#333 !important">

						<div style="margin-top: 30px">
							<h4 style="margin-bottom: 15px;">Other info:</h4>
							<h6><b>Categories</b></h6>
							<hr style="margin-top: 0px; height:1px;border:none;color:#333;background-color:#333;" >
							<ul style="padding: 0px 0px 0px 0px;">
								<% for (var i = 0; i < recipe.category.length; i++) { %>
								<li style="display: inline-block"><%= recipe.category[i]%>, </li>
								<% } %>
							</ul>
					
								<% if (recipe.allergens.length !== 0) { %>
									<h6><b>Allergens</b></h6>
									<hr style="margin-top: 0px; height:1px;border:none;color:#333;background-color:#333;" >
									<ul style="padding: 0px 0px 0px 0px;">
										<% for (var i = 0; i < recipe.allergens.length; i++) { %>
										<li style="display: inline-block"><%= recipe.allergens[i]%>, </li>
										<% } %>
									</ul>
								<% } else { %> 
									<div>
										<h6><b>Allergens</b></h6>
										<hr style="margin-top: 0px; height:1px;border:none;color:#333;background-color:#333;" >
										<h6>This Recipe has no known Allergens. Consume at your own risk!</h6>
									</div>
									<br>
								<% } %>

						</div>
				
         </div>

           


    </div>
    
</div>


<%- include('../partials/comments') -%>



<%- include('../partials/footer') -%>

